<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SkyMate</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico" />

    <!-- Bootstrap5 cdn -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">



    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/ab0ab137d9.js" crossorigin="anonymous"></script>

    <!-- Css StyleSheets -->
    <link rel="stylesheet" href="./css/admin.css">

</head>

<body class="home">
    <!-- Navbar Code -->
    <section id="title">
        <div id="header">
            <nav class="navbar navbar-expand-lg sticky-top">
                <a href="" class="navbar-brand" style="color: #F3FBFB;">SkyMate</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="fas fa-stream"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="dashboard.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <form action="/logout" method="post">
                                <button name="submit" class="beautiful-button" type="submit">LOG OUT</button>
                            </form>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <!-- Navbar Code End -->

    </section>




    <% const totalUsers=100; // Total number of users (replace with actual total) const
        customerPercentage=(customerCount / totalUsers) * 100; %>

        <% customerflightPercentage=(customerFlightCount / customerCount) * 100; %>

        <% const totalflights=250; // Total number of users (replace with actual total) const
        flightPercentage=(flightcount / totalflights) * 100; %>

            <section id="data">
                <div class="heading">
                    <h1>
                        <a href="" class="typewrite" data-period="2000"
                            data-type='[ "Welcome to Admin dashboard...", "Hello Admin <%= adminId %>" ]'>
                            <span class="wrap"></span>
                        </a>
                    </h1>
            
                </div>
                <div class="row container container-fluid" style="margin: auto; justify-content: center; width: 100%;">
                    <div class="col-lg-4">
                        <div class="card-data">
                            <div class="title">
                                <p class="title-text">
                                    Total Number of users &nbsp; <i class="fa-sharp fa-solid fa-arrow-right"></i> &nbsp;
                                    <%= customerCount %>
                                </p>
                            </div>
                            <div class="data">
                                <img src="images/total-users.gif" alt="" width="35%" style="margin:auto">

                                <div class="range">
                                    <div class="fill" style="width: <%= customerPercentage.toFixed(2) %>%">
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="col-lg-4">
                        <div class="card-data">
                            <div class="title">
                                <p class="title-text">
                                    Total Customers &nbsp; <i class="fa-sharp fa-solid fa-arrow-right"></i> &nbsp; <%=
                                    customerFlightCount %>
                                </p>
                            </div>
                            <div class="data">
                                <img src="images/totalcustomers.gif" alt="" width="35%" style="margin:auto">

                                <div class="range">
                                    <div class="fill" style="width: <%= customerflightPercentage.toFixed(2) %>%">
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="col-lg-4">
                        <div class="row container container-fluid" style="margin: auto; justify-content: center; width: 100%">
                            <div class="card-data">
                                <div class="title">
                                    <p class="title-text">
                                        Scheduled Flights &nbsp; <i class="fa-sharp fa-solid fa-arrow-right"></i> &nbsp; <%=
                                            flightcount %>
                                    </p>
                                </div>
                                <div class="data">
                                    <img src="images/take-off.gif" alt="" width="35%" style="margin:auto">
        
                                    <div class="range">
                                        <div class="fill" style="width: <%= flightPercentage.toFixed(2) %>%">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <div class="spinner" style="display: flex; justify-content: center; margin: auto;">
                <span></span>
                <span></span>
                <span></span>
            </div>


            <section id="features" style="position: relative;margin: auto 7%; margin-top: 3%;">
                <div class="row">
                    <div class="col-lg-4">
                        <div class="card">
                            <div class="img-div">
                                <img src="images/users.png" style="width: 30%; margin: 0%;" alt="">
                            </div>
                            <h1 class="heading">USER DETAILS</h1>
                            <div class="loader"></div>
                            <p class="para">Click here to access user details and manage user information.
                            </p>
                            <div class="overlay"></div>
                            <button onClick="window.location.href='/usersearch'" class="card-btn">Click &nbsp <i
                                    class="fa-solid fa-magnifying-glass fa-rotate-90"
                                    style="color: #001842;"></i></button>
                        </div>
                    </div>

                    <div class="col-lg-4">
                        <div class="card card-2">
                            <div class="img-div">
                                <img src="images/globe.png" style="width: 25%; margin: 0%; color: #F3FBFB;" alt="">
                            </div>
                            <h1 class="heading">CREATE FLIGHTS</h1>
                            <div class="loader"></div>
                            <p class="para"><i class="fi fi-br-check-circle"></i>Click here to add more flights in your
                                system.
                            </p>
                            <div class="overlay-2"></div>
                            <button onClick="window.location.href='/adminpage'" class="card-btn">Click &nbsp <i
                                    class="fa-solid fa-circle-plus fa-rotate-90" style="color: #001842;"></i></button>
                        </div>
                    </div>

                    <div class="col-lg-4">
                        <div class="card card-3">
                            <div class="img-div">
                                <img src="images/globe-2.png" style="width: 25%; margin: 0%;" alt="">
                            </div>
                            <h1 class="heading">FLIGHT RECORDS</h1>
                            <div class="loader"></div>
                            <p class="para">Click here to access and update flights record.
                            </p>
                            <div class="overlay-3"></div>
                            <button onClick="window.location.href='/admincrudoperations'" class="card-btn">Click &nbsp
                                <i class="fa-solid fa-pen-to-square" style="color: #001842;"></i></button>
                        </div>
                    </div>
                </div>
            </section>






            <script>
                var TxtType = function (el, toRotate, period) {
                    this.toRotate = toRotate;
                    this.el = el;
                    this.loopNum = 0;
                    this.period = parseInt(period, 10) || 2000;
                    this.txt = '';
                    this.tick();
                    this.isDeleting = false;
                };

                TxtType.prototype.tick = function () {
                    var i = this.loopNum % this.toRotate.length;
                    var fullTxt = this.toRotate[i];

                    if (this.isDeleting) {
                        this.txt = fullTxt.substring(0, this.txt.length - 1);
                    } else {
                        this.txt = fullTxt.substring(0, this.txt.length + 1);
                    }

                    this.el.innerHTML = '<span class="wrap">' + this.txt + '</span>';

                    var that = this;
                    var delta = 200 - Math.random() * 100;

                    if (this.isDeleting) { delta /= 2; }

                    if (!this.isDeleting && this.txt === fullTxt) {
                        delta = this.period;
                        this.isDeleting = true;
                    } else if (this.isDeleting && this.txt === '') {
                        this.isDeleting = false;
                        this.loopNum++;
                        delta = 500;
                    }

                    setTimeout(function () {
                        that.tick();
                    }, delta);
                };

                window.onload = function () {
                    var elements = document.getElementsByClassName('typewrite');
                    for (var i = 0; i < elements.length; i++) {
                        var toRotate = elements[i].getAttribute('data-type');
                        var period = elements[i].getAttribute('data-period');
                        if (toRotate) {
                            new TxtType(elements[i], JSON.parse(toRotate), period);
                        }
                    }
                    // INJECT CSS
                    var css = document.createElement("style");
                    css.type = "text/css";
                    css.innerHTML = ".typewrite > .wrap { border-right: 0.08em solid #fff}";
                    document.body.appendChild(css);
                };
            </script>




            <!-- Bootstrap5 script -->
            <!-- Bootstrap JavaScript -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>